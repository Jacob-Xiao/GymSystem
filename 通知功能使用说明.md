# 通知功能使用说明

## 功能概述

在管理员页面新增了通知管理功能，包含以下两个主要功能：

1. **发送通知**：可以向全体会员或个别会员发送自定义通知
2. **批量更新会员信息**：可以批量更新全体或个别会员的剩余课时数和会籍时长

## 数据库设置

在使用功能之前，需要先执行SQL脚本创建通知表：

```sql
-- 执行 notification.sql 文件中的SQL语句
-- 或者在MySQL中运行以下命令：
source notification.sql;
```

## 功能说明

### 1. 发送通知

- **位置**：管理员页面 → 通知管理 → "发送通知"标签页
- **功能**：
  - 填写通知标题和内容
  - 选择发送对象：全体会员 或 个别会员
  - 如果选择个别会员，可以从会员列表中选择要发送的会员
  - 发送的通知会保存到通知记录中，可以查看和删除

### 2. 批量更新会员信息

- **位置**：管理员页面 → 通知管理 → "批量更新会员信息"标签页
- **功能**：
  - 选择更新对象：全体会员 或 个别会员
  - 如果选择个别会员，可以从会员列表中选择要更新的会员
  - 可以更新以下字段：
    - **剩余课时数**：输入新的剩余课时数（留空则不更新）
    - **会籍时长（月）**：输入新的会籍时长，单位为月（留空则不更新）
  - 至少需要填写一个字段才能提交

## 使用方法

1. **访问通知管理页面**：
   - 登录管理员账号
   - 在左侧导航栏点击"通知管理"

2. **发送通知**：
   - 点击"发送通知"标签页
   - 填写通知标题和内容
   - 选择发送对象（全体/个别）
   - 如果选择个别，勾选要发送的会员
   - 点击"发送通知"按钮

3. **批量更新会员信息**：
   - 点击"批量更新会员信息"标签页
   - 选择更新对象（全体/个别）
   - 如果选择个别，勾选要更新的会员
   - 输入要更新的字段值（至少填写一个）
   - 点击"更新会员信息"按钮

## 注意事项

1. 如果数据库中还没有 `membership_duration` 字段，需要先执行 `membership_duration.sql` 脚本添加该字段
2. 批量更新会员信息时，留空的字段不会被更新，只更新填写了值的字段
3. 通知记录会保存在数据库中，可以随时查看和删除
4. 删除通知只会删除通知记录，不会影响已发送的通知（如果未来实现了会员端通知查看功能）

## 技术实现

- **后端路由**：`/api/notification`
- **前端页面**：`/admin/notifications`
- **数据库表**：`notification`
- **相关服务**：
  - `notificationService.js` - 通知服务
  - `memberBatchUpdateService.js` - 批量更新会员服务
