# 通知功能问题排查指南

## 问题1: 发送通知时显示404错误

### 可能原因和解决方案：

1. **后端服务没有重启**
   - 新添加的路由文件需要重启后端服务才能生效
   - **解决方案**：
     - 停止当前运行的后端服务（在终端按 Ctrl+C）
     - 重新启动后端服务：`cd backend && npm start` 或 `npm run dev`

2. **数据库表还没有创建**
   - 通知功能需要 `notification` 表
   - **解决方案**：
     ```sql
     -- 在MySQL中执行以下SQL语句
     source notification.sql;
     -- 或者直接执行 notification.sql 文件中的内容
     ```

3. **检查后端服务是否正常运行**
   - 打开浏览器访问：http://localhost:3001/api/health
   - 如果返回 `{"status":"OK","message":"Server is running"}` 说明后端正常运行
   - 如果无法访问，说明后端服务没有启动

4. **检查后端路由是否正确加载**
   - 查看后端终端是否有错误信息
   - 确认 `backend/routes/notification.js` 文件存在
   - 确认 `backend/server.js` 中已添加路由注册

## 问题2: 选择个别会员时无法选择会员

### 可能原因和解决方案：

1. **会员列表没有加载**
   - 检查浏览器控制台（F12）是否有错误信息
   - 检查网络请求 `/api/member/all` 是否成功
   - **解决方案**：
     - 如果会员列表为空，先确保有会员数据
     - 检查后端服务是否正常运行

2. **数据库表问题**
   - 如果 `member` 表有问题，会员列表无法加载
   - **解决方案**：
     - 检查数据库连接
     - 确认 `member` 表存在且有数据

## 快速检查清单

1. ✅ 后端服务是否正在运行？
   - 访问 http://localhost:3001/api/health 检查

2. ✅ 数据库表是否已创建？
   - 执行 `notification.sql` 脚本创建通知表

3. ✅ 后端服务是否已重启？
   - 如果添加了新路由，需要重启后端服务

4. ✅ 浏览器控制台是否有错误？
   - 打开浏览器开发者工具（F12）查看 Console 和 Network 标签

5. ✅ 会员数据是否存在？
   - 确认数据库中 `member` 表有数据

## 测试步骤

1. **测试后端API**
   ```bash
   # 使用curl测试（或使用Postman）
   curl http://localhost:3001/api/notification/all
   ```

2. **检查数据库表**
   ```sql
   USE gym_management_system;
   SHOW TABLES LIKE 'notification';
   SELECT * FROM notification;
   ```

3. **检查后端日志**
   - 查看运行后端服务的终端窗口
   - 查看是否有错误信息

## 常见错误信息

- **404 Not Found**: 路由不存在，可能是后端服务未重启
- **500 Internal Server Error**: 服务器内部错误，可能是数据库表不存在或SQL错误
- **Network Error**: 无法连接到后端，可能是后端服务未启动
